import React, { useContext } from 'react';
import { withRouter, Link } from 'react-router-dom';
import styled from 'styled-components';

import { CurrentUserContext, DaoServiceContext, ThemeContext } from '../../contexts/Store';

// import './MainNav.scss';

import {
  baseFontColor,
  primaryHover,
  appLight,
  appDark,
} from '../../variables.styles';

const MainNav = styled.div`
  position: fixed;
  bottom: 0;
  height: 90px;
  width: 100%;
  z-index: 1;
  display: flex;
  flex-direction: row;
  text-align: center;
  a {
      text-align: center;
      display: flex;
      width: 33%;
      flex-direction: column;
      align-content: center;
      justify-content: center;
      text-decoration: none;
      transition: all .15s ease-in-out;
      font-weight: 900;
      color: ${baseFontColor};
      fill: ${baseFontColor};
      &:hover { color: ${primaryHover}; fill: ${primaryHover}; }
      svg {
          width: 24px;
          height: auto;
          margin: 0 auto;
      }
  }
  &.Global {
      background-color: ${appLight};
      border-top: 2px solid ${appDark};
  }
`

const BottomNav = (props) => {
  const [currentUser] = useContext(CurrentUserContext);
  const [daoService] = useContext(DaoServiceContext);
  const [themeVariables] = useContext(ThemeContext);  

  const ThemedMainNav = styled(MainNav)`

  a {
      color: ${themeVariables.baseFontColor};
      fill: ${themeVariables.baseFontColor};
      &:hover { color: ${themeVariables.primaryHover}; fill: ${themeVariables.primaryHover}; }

  }
  &.Global {
      background-color: ${themeVariables.appLight};
      border-top: 2px solid ${themeVariables.appDark};
  }
  `
  return (
    <ThemedMainNav
      className={
        (props.location.pathname === `/dao/${daoService.daoAddress}`
          ? ''
          : 'Global')
      }
    >
      <a href={`/dao/${daoService.daoAddress}/proposals`}>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <path fill="none" d="M0 0h24v24H0V0z" />
          <path d="M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7zm12-4h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04-.39.08-.74.28-1.01.55-.18.18-.33.4-.43.64-.1.23-.16.49-.16.77v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM19 19H5V5h14v14z" />
        </svg>
        Proposals
      </a>
      <a href={`/dao/${daoService.daoAddress}/members`}>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <path fill="none" d="M0 0h24v24H0V0z" />
          <path d="M9 13.75c-2.34 0-7 1.17-7 3.5V19h14v-1.75c0-2.33-4.66-3.5-7-3.5zM4.34 17c.84-.58 2.87-1.25 4.66-1.25s3.82.67 4.66 1.25H4.34zM9 12c1.93 0 3.5-1.57 3.5-3.5S10.93 5 9 5 5.5 6.57 5.5 8.5 7.07 12 9 12zm0-5c.83 0 1.5.67 1.5 1.5S9.83 10 9 10s-1.5-.67-1.5-1.5S8.17 7 9 7zm7.04 6.81c1.16.84 1.96 1.96 1.96 3.44V19h4v-1.75c0-2.02-3.5-3.17-5.96-3.44zM15 12c1.93 0 3.5-1.57 3.5-3.5S16.93 5 15 5c-.54 0-1.04.13-1.5.35.63.89 1 1.98 1 3.15s-.37 2.26-1 3.15c.46.22.96.35 1.5.35z" />
        </svg>
        Members
      </a>
      {currentUser ? (
        <a href={`/dao/${daoService.daoAddress}/account`}>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
          >
            <path fill="none" d="M0 0h24v24H0V0z" />
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 3.05-1.78 4.93-1.78s4.51.88 4.93 1.78C15.57 19.36 13.86 20 12 20s-3.57-.64-4.93-1.72zm11.29-1.45c-1.43-1.74-4.9-2.33-6.36-2.33s-4.93.59-6.36 2.33C4.62 15.49 4 13.82 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 1.82-.62 3.49-1.64 4.83zM12 6c-1.94 0-3.5 1.56-3.5 3.5S10.06 13 12 13s3.5-1.56 3.5-3.5S13.94 6 12 6zm0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11z" />
          </svg>
          Account
        </a>
      ) : (
        <a href={`/dao/${daoService.daoAddress}/sign-in`}>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
          >
            <path fill="none" d="M0 0h24v24H0V0z" />
            <path d="M22 19h-6v-4h-2.68c-1.14 2.42-3.6 4-6.32 4-3.86 0-7-3.14-7-7s3.14-7 7-7c2.72 0 5.17 1.58 6.32 4H24v6h-2v4zm-4-2h2v-4h2v-2H11.94l-.23-.67C11.01 8.34 9.11 7 7 7c-2.76 0-5 2.24-5 5s2.24 5 5 5c2.11 0 4.01-1.34 4.71-3.33l.23-.67H18v4zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3zm0-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z" />
          </svg>
          Sign In
        </a>
      )}
    </ThemedMainNav>
  );
};

export default withRouter(BottomNav);
